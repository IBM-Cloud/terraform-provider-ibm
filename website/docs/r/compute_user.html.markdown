---
layout: "ibm"
page_title: "IBM : compute_user"
sidebar_current: "docs-ibm-resource-compute-user"
description: |-
  Manages IBM user accounts.
---

# ibm\_compute_user

You can retrieve, create, update, and delete SoftLayer users with this resource. You can manage either SoftLayer or IBMid accounts.

## SoftLayer Account
When you use this resource to create SoftLayer local credentials, you need to define the `username` and `password` arguments. You can use the user name and password to log in to the SoftLayer portal. 

To access the SoftLayer API, you need to log in with the user name and API key. An `api_key` is generated by SoftLayer when the `has_api_key` flag is `true`.

If the SoftLayer API [getBlueIdAuthenticationRequiredFlag](https://api.softlayer.com/rest/v3/SoftLayer_Account/getBlueIdAuthenticationRequiredFlag) returns `false`, the account is a local account.

### Example Usage

The following example shows how to use this resource with SoftLayer accounts:

```hcl
resource "ibm_compute_user" "joe" {
    address1     = "12345 Any Street"
    address2     = "Suite #99"
    city         = "Atlanta"
    company_name = "Comp Inc"
    country      = "US"
    email        = "joe@doe.com"
    first_name   = "Joe"
    has_api_key  = false
    last_name    = "Doe"
    username     = "testuser"
    password     = "Change3Me!"
    permissions  = [
        "ACCESS_ALL_GUEST",
        "ACCESS_ALL_HARDWARE",
        "SERVER_ADD",
        "SERVER_CANCEL",
        "RESET_PORTAL_PASSWORD"
    ]
    state        = "GA"
    timezone     = "EST"
}
```

## IBMid Account
You can use an IBMid instead of your SoftLayer credentials. By default, the `email` address that is associated with your SoftLayer account is used for your IBMid. 

If you use this resource for an IBMid account, the resource should not contain `username` and `password` arguments. The user name is generated by SoftLayer and the password is not used in an IBMid account.

When a user is created, you can log in to the SoftLayer API with the user name and API key. 

When a user is created, an activation email is sent to the IBMid. After activation, the user can log in to the SoftLayer portal with the IBMid. 

If the SoftLayer API  [getBlueIdAuthenticationRequiredFlag](https://api.softlayer.com/rest/v3/SoftLayer_Account/getBlueIdAuthenticationRequiredFlag)
returns `true` (please use `username` and `api_key` for authentication), the account is an IBMid.

### Example Usage

The following example shows how to use this resource with IBMid accounts:

```hcl
resource "ibm_compute_user" "joe" {
    address1     = "12345 Any Street"
    address2     = "Suite #99"
    city         = "Atlanta"
    company_name = "Comp Inc"
    country      = "US"
    email        = "joe@doe.com"
    first_name   = "Joe"
    has_api_key  = false
    last_name    = "Doe"
    permissions  = [
        "ACCESS_ALL_GUEST",
        "ACCESS_ALL_HARDWARE",
        "SERVER_ADD",
        "SERVER_CANCEL",
        "RESET_PORTAL_PASSWORD"
    ]
    state        = "GA"
    timezone     = "EST"
}
```


**NOTE**: An [IBMid](https://www.ibm.com/account/profile/us) is used as a consistent way to access IBM products. You can create an IBMid in advance.

For additional details, see the [SoftLayer API documentation](http://sldn.softlayer.com/reference/datatypes/SoftLayer_User_Customer).

## Argument Reference

The following arguments are supported:

* `address1` - (Required, string) The first line of the user's street address.
* `address2` - (Optional, string) The second line of the user's street address.
* `city` - (Required, string) The user's city.
* `company_name` - (Required, string) The user's company.
* `country` - (Required, string) The user's country.
* `email` - (Required, string) The email address associated with the account.
* `first_name` - (Required, string) The user's first name.
* `has_api_key` - (Optional, string) If set to `true`, a SoftLayer API key is created for the user. The key is returned in the `api_key` attribute. Default value: `False`. If set to `false`, any existing SoftLayer API keys for the user are deleted.
* `last_name` - (Required, string) The user's last name.
* `username` - (Required for SoftLayer accounts, optional for IBMid accounts, string) A unique name to identify a user globally across all SoftLayer logins. It is also the user login. Once a user login is created, it cannot be changed. You need to define a user name when your account is a SoftLayer account. 

  For an IBMid account, the user name is generated by SoftLayer. For example, if an IBMid account number is `1234567` and the email (IBMid) is `test@example.com`, `1234567_test@example.com` is generated by SoftLayer as a user name. This argument is optional for an IBMid account.
* `password` - (Required for SoftLayer accounts, string) Initial password for the user account. The password needs to conform to SoftLayer's password policies to avoid failures. You can find the password policies in the SoftLayer portal profile page. 
  Valid passwords must meet the following rules:
  * Be 8 to 20 characters in length.
  * Have a combination of upper and lowercase characters.
  * Contain at least one number.
  * Contain at least one of the following special characters: `_`, `-`, `|`, `@`, `.`, `, `, `?`, `/`, `!`, `~`, `#`, `$`, `%`, `^`, `&`, `*`, `(`, `)`, `{`, `}`, `[`, `]`, `=`. 
  The password specified here is hashed and encoded before it is stored in the Terraform state file.
  For an IBMid account, the password arguments are ignored.
* `permissions` - (Optional, string) Permissions assigned to this user. This is a set of zero or more string values. See the [SoftLayer API doc for user permissions](http://sldn.softlayer.com/reference/datatypes/User_Customer_CustomerPermission_Permission).
* `state` - (Required, string) The state of a user's street address.
* `timezone` - (Required, string) The user's timezone as a short name value (e.g., "EST"). For accepted values, see the [SoftLayer API doc for timezones ](http://sldn.softlayer.com/reference/datatypes/SoftLayer_Locale_Timezone).
* `user_status` - (Optional, string) The user's login status. For accepted values, see the [SoftLayer API doc for user status](http://sldn.softlayer.com/reference/datatypes/SoftLayer_User_Customer_Status). Default value: `ACTIVE`.
* `tags` - (Optional, array of strings) Set tags on the user account instance.

**NOTE**: `Tags` are managed locally and not stored on the IBM Cloud service endpoint at this moment.

## Attributes Reference

The following attributes are exported:

* `api_key`: The SoftLayer API key that is created for the user.
* `id`: The unique SoftLayer ID that is created for for the user.
* `ibm_id`: The user name for IBMid accounts. This attribute is generated by SoftLayer when the IBMid is activated. 

## Additional Notes

In SoftLayer, there is a delay when user logins are deleted from SoftLayer backend systems. SoftLayer acknowledges delete requests and immediately updates the user status to `CANCEL_PENDING`. The actual deletion from the SoftLayer system processes at an unspecified time in the future. 

This delay may be significant, especially during your project's testing phase. If you create a user login, delete it, and create it again, you may receive an error, as SoftLayer backend has not completely processed the previous delete operation. If you do want to run through the create-delete-recreate cycle, you need to specify a new, globally-unique user name in your subsequent requests.
